{#include base.html}
  {#title}{#if book}Edit {book.title}{#else}New Book{/if} - Books - Admin - Vintage Store{/}

  {#insert}
    <div class="row mb-4">
      <div class="col-12">
        <h1>
          {#if book}
            <i class="bi bi-pencil me-2"></i>Edit Book
          {#else}
            <i class="bi bi-plus-circle me-2"></i>New Book
          {/if}
        </h1>
        <hr>
      </div>
    </div>

    <div class="row">
      <div class="col-md-8">
        <div class="card">
          <div class="card-header bg-primary text-white">
            <i class="bi bi-book me-2"></i>Book Information
          </div>
          <div class="card-body">
            {#form uri:AdminController.bookSave()}
              {#if book}
                <input type="hidden" name="id" value="{book.id}">
              {/if}

              <div class="mb-3">
                <label for="title" class="form-label">Title <span class="text-danger">*</span></label>
                <input type="text" class="form-control" id="title" name="title"
                       value="{#if book}{book.title}{/if}"
                       required maxlength="200" placeholder="Enter book title">
              </div>

              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="isbn" class="form-label">ISBN</label>
                  <input type="text" class="form-control" id="isbn" name="isbn"
                         value="{#if book}{book.isbn}{/if}"
                         maxlength="20" placeholder="e.g., 978-0-13-468599-1">
                </div>

                <div class="col-md-6 mb-3">
                  <label for="nbOfPages" class="form-label">Number of Pages</label>
                  <input type="number" class="form-control" id="nbOfPages" name="nbOfPages"
                         value="{#if book}{book.nbOfPages}{/if}"
                         min="1" placeholder="e.g., 350">
                </div>
              </div>

              <div class="row">
                <div class="col-md-4 mb-3">
                  <label for="price" class="form-label">Price</label>
                  <div class="input-group">
                    <span class="input-group-text">$</span>
                    <input type="number" class="form-control" id="price" name="price"
                           value="{#if book}{book.price}{/if}"
                           min="0" step="0.01" placeholder="0.00">
                  </div>
                </div>

                <div class="col-md-4 mb-3">
                  <label for="stock" class="form-label">Stock</label>
                  <input type="number" class="form-control" id="stock" name="stock"
                         value="{#if book}{book.stock}{/if}"
                         min="0" placeholder="0">
                </div>

                <div class="col-md-4 mb-3">
                  <label for="language" class="form-label">Language</label>
                  <select class="form-select" id="language" name="language">
                    <option value="">-- Select Language --</option>
                    {#for lang in languages}
                      <option value="{lang}" {#if book && book.language == lang}selected{/if}>{lang}</option>
                    {/for}
                  </select>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="publicationDate" class="form-label">Publication Date</label>
                  <input type="date" class="form-control" id="publicationDate" name="publicationDate"
                         value="{#if book}{book.publicationDate}{/if}">
                </div>

                <div class="col-md-6 mb-3">
                  <label for="publisherId" class="form-label">Publisher</label>
                  <select class="form-select" id="publisherId" name="publisherId">
                    <option value="">-- Select Publisher --</option>
                    {#for pub in publishers}
                      <option value="{pub.id}" {#if book && book.publisher && book.publisher.id == pub.id}selected{/if}>{pub.name}</option>
                    {/for}
                  </select>
                </div>
              </div>

              <div class="mb-3">
                <label for="description" class="form-label">Description</label>
                <textarea class="form-control" id="description" name="description" rows="4"
                          placeholder="Enter book description">{#if book}{book.description}{/if}</textarea>
              </div>

              <hr>

              <div class="d-flex justify-content-between">
                <a href="/admin/books" class="btn btn-secondary">
                  <i class="bi bi-x-circle me-1"></i>Cancel
                </a>
                <button type="submit" class="btn btn-primary">
                  <i class="bi bi-check-circle me-1"></i>
                  {#if book}Update Book{#else}Create Book{/if}
                </button>
              </div>
            {/form}
          </div>
        </div>
      </div>

      <div class="col-md-4">
        <div class="card">
          <div class="card-header bg-info text-white">
            <i class="bi bi-lightbulb me-2"></i>Tips
          </div>
          <div class="card-body">
            <ul class="list-unstyled mb-0">
              <li class="mb-2">
                <i class="bi bi-check-circle text-success me-1"></i>
                <strong>Title</strong> is required.
              </li>
              <li class="mb-2">
                <i class="bi bi-upc text-primary me-1"></i>
                <strong>ISBN</strong> should be a valid 10 or 13 digit identifier.
              </li>
              <li class="mb-2">
                <i class="bi bi-currency-dollar text-success me-1"></i>
                <strong>Price</strong> is in USD.
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  {/insert}
{/include}
